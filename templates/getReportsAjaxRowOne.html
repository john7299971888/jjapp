{% if error: %}
		<div class="col-lg-12">
			<div class="alert alert-danger alert-dismissible fade in">
				<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
				<strong>Danger!</strong> 	{% for item in error %}
				{% for s_key,s_value in item.items() %}
				<b>  {{s_key}}</b> : {{s_value}}<br>
				{% endfor %}				
				{% endfor %}
			</div>		
		</div>
{% else %}
		<div class="col-lg-12">
		<div class="row">				
				<div class="col-lg-3">				
					<div class="panel panel-default">								
						<div class="panel-body" style="min-height:400px;overflow-x: scroll;">
							<h4><span class="glyphicon glyphicon-th-list"></span> Latest Score</h4>
							<table class="table table-striped" id="latest-score">
								<thead>
									<th>Platform</th>
									<th>Score</th>
									<th>Version</th>										
								</thead>	
								<tbody>
									{% for ri_data in latest_score_data %}									
										<tr>
											<td>{{ri_data['platform']}}</td>
											<td>{{ri_data['score']}}</td>
											<td>{{ri_data['version']}} - {{ri_data['sub_version']}}</td>				
											
										</tr>
									{% endfor %}
								</tbody>
							</table>						
						</div>
					</div>
				</div>
				
				<div class="col-lg-6" style="overflow-x:scroll">						
					
					{% if trend_chart_score_data %}
						<div id="trend_chart" style="min-width: {{trend_chart_width_new}}px; height: 400px; margin: 0 auto;"></div> 
					{% else %}							
						<h4><i class="fa fa-line-chart" style="font-size:24px"></i> Platform Wise Trend</h4>
						<span class="glyphicon glyphicon-search"></span> Coming Soon...								
					{% endif %}		
					
					
				</div>
				
				<div class="col-lg-3">				
					<div class="panel panel-default">								
						<div class="panel-body" style="min-height:400px;overflow-x: scroll;">
							<h4><span class="glyphicon glyphicon-th-list"></span> Previous Score</h4>
							<table class="table table-striped" id="previous-score">
								<thead>
									<th>Platform</th>
									<th>Score</th>
									<th>Version</th>											
								</thead>	
								<tbody>
									{% for ri_data in previous_score_data %}									
										<tr>
											<td>{{ri_data['platform']}}</td>
											<td>{{ri_data['score']}}</td>
											<td>{{ri_data['version']}} - {{ri_data['sub_version']}}</td>												
										</tr>
									{% endfor %}
								</tbody>
							</table>						
						</div>
					</div>
				</div>						
		</div>					
		</div>	
	
                <div class="col-lg-12">
					<div class="row">					
						<div class="col-lg-6">
						
							{% if component_wise %}									
								<div id="ddts_component_wise" style="min-width: 280px; height: 350px; margin: 0 auto"></div>
							{% else %}
								<div class="panel panel-default">
									<div class="panel-body">
										<h4><i class="fa fa-bar-chart" style="font-size:24px"></i> Component Wise - DDTS</h4>
										<span class="glyphicon glyphicon-search"></span> No records.
									</div>
								</div>								
							{% endif %}							

						</div>					


						<div class="col-lg-6">							
							{% if severity_wise %}									
								<div id="ddts_severity_wise" style="min-width: 280px; height: 350px; margin: 0 auto"></div>
							{% else %}
								<div class="panel panel-default">
									<div class="panel-body">
										<h4><i class="fa fa-bar-chart" style="font-size:24px"></i> Severity Wise - DDTS</h4>
										<span class="glyphicon glyphicon-search"></span> No records.
									</div>
								</div>								
							{% endif %}	
						</div>						
						
					</div>				
				</div>
				
				<div class="col-lg-12">	
					<h4><span class='glyphicon glyphicon-list' ></span> Consolidated DDTS Details</h4>
					<table class="table table-bordered" id='bug-list-table'>
						<thead>
							<th>DDTS</th>
							<th>Component</th>
							<th>Status</th>
							<th>Age</th>
							<th>Headline</th>									
						</thead>	
						<tbody>
							{% for cdets_info_item in cdets_info %}									
								<tr>
									<td><a href="http://cdetsweb-prd.cisco.com/apps/dumpcr?identifier={{cdets_info_item['Identifier']}}" target="_blank">{{cdets_info_item['Identifier']}}</a></td>
									<td>{{cdets_info_item['Component']}}</td>
									<td>{{cdets_info_item['Status']}}</td>											
									<td>{{cdets_info_item['Age']}}</td>
									<td>{{cdets_info_item['Headline']}}</td>											
								</tr>
							{% endfor %}
						</tbody>
					</table>
				</div>



            {% if platform_wise_score_breakup %}
			    {% set loopidx = 0 %}
				{% for platform_key,platform_details in platform_wise_score_breakup.items() %}
				    {% set loopidx = loopidx+1 %}
				
					{% for details in platform_details %}
						<div class="col-lg-12">	
							<h4><span class='glyphicon glyphicon-list' ></span> {{platform_key|upper}}</h4>
							<p><b>Score :</b> {{details['score']|upper}} - <b>Version :</b> {{details['version']|upper}} ({{details['sub_version']|lower}})</p>
							<table class="table table-bordered">
								<thead>
									<th>Score</th>
									<th>Test Areas</th>
									<th>DDTS</th>
									<th>Impact</th>								
								</thead>
								
								<tbody>
									{% for platform_item in test_areas_for_breakup[platform_key]['break_up'] %}													
										<tr>									
											<td>{{platform_item['area_score']}}</td>
											<td>{{platform_item['area_name']}}</td>										
											<td>{{platform_item['ddts']}}</td>											
											<td>{{platform_item['impact']}}</td>										
										</tr>
									{% endfor %}
								</tbody>
								
							</table>
						</div>						
					{% endfor %}				
					

					<div class="col-lg-12">	
						<h4><span class='glyphicon glyphicon-list' ></span> DDTS Info</h4>
						
						<table class="table table-bordered" id='bug-list-table-{{loop.index}}'>
							<thead>
								<th>DDTS</th>
								<th>Component</th>
								<th>Status</th>
								<th>Age</th>
								<th>Headline</th>									
							</thead>	
							<tbody>
								{% for cdets_info_item in test_areas_for_breakup[platform_key]['ddts'] %}									
									<tr>
										<td><a href="http://cdetsweb-prd.cisco.com/apps/dumpcr?identifier={{cdets_info_item['Identifier']}}" target="_blank">{{cdets_info_item['Identifier']}}</a></td>
										<td>{{cdets_info_item['Component']}}</td>
										<td>{{cdets_info_item['Status']}}</td>											
										<td>{{cdets_info_item['Age']}}</td>
										<td>{{cdets_info_item['Headline']}}</td>											
									</tr>
								{% endfor %}
							</tbody>
							
						</table>
					</div>

					
				{% endfor %}				
			{% endif %}	
{% endif %}

<script type="text/javascript">

Highcharts.chart('trend_chart', {
    chart: {
        renderTo: "chart",
        type: "column"
    },
	legend:{enabled:false},	
    title: {
        text: {{trend_chart_main_title|tojson}},
		style: {
			fontWeight: 'bold',
			fontSize: '13px'			
		}		
    },	
    tooltip: {
        headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
        pointFormat: '<tr><td style="padding:0"><b>{point.y:.1f}</b></td></tr>',
        footerFormat: '</table>',
        shared: true,
        useHTML: true
    },
    plotOptions: {
        column: {
            pointPadding: 0.2,
            borderWidth: 0,
			pointWidth:22
        }
    },
    yAxis: {
        min: 0,
		max:10,
        title: {
            text: 'Regression Score'
        }
    },
    xAxis: {
		labels: {
            enabled: {{trend_chart_new_legends|tojson}},		
			groupedOptions: [{
				style: {
				    fontSize: '14px',
					fontWeight:'bold',					
					color: 'red' // set red font for labels in 1st-Level  
				},
				rotation: {{categories_rotation|tojson}}
			}],
			rotation: 0,
			// 0-level options aren't changed, use them as always,
			style: {
                fontFamily: 'Verdana, sans-serif',
				fontWeight:'bold',
				color: 'green' // set red font for labels in 1st-Level  
			}			
		},	
        categories: {{trend_chart_categories|tojson}}
    },	
    series: [{
        data: {{trend_chart_score_data|tojson}},
		dataLabels: {
            enabled: true,
			rotation: -90,
            color: '#FFFFFF',
            align: 'right',
            format: '{point.y:.1f}', // one decimal
            y: 5, // 10 pixels down from the top
            style: {
                fontSize: '13px',
                fontFamily: 'Verdana, sans-serif'
            }
        } 
    }]
});


// Build the chart
Highcharts.chart('ddts_component_wise', {
    chart: {
        plotBackgroundColor: null,
        plotBorderWidth: null,
        plotShadow: false,
        type: 'pie'
    },
    title: {
        text: 'Component Wise - DDTS'
    },
    tooltip: {
        pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
    },
    plotOptions: {
        pie: {
            allowPointSelect: true,
            cursor: 'pointer',
            dataLabels: {
                enabled: true,
                format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                style: {
                    color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                },
                connectorColor: 'silver'
            }
        }
    },
    series: [{
        name: 'Share',
        data: {{component_wise | tojson}}
    }]
});


// Build the chart
Highcharts.chart('ddts_severity_wise', {
    chart: {
        plotBackgroundColor: null,
        plotBorderWidth: null,
        plotShadow: false,
        type: 'pie'
    },
    title: {
        text: 'Severity Wise - DDTS'
    },
    tooltip: {
        pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
    },
    plotOptions: {
        pie: {
            allowPointSelect: true,
            cursor: 'pointer',
            dataLabels: {
                enabled: true,
                format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                style: {
                    color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                },
                connectorColor: 'silver'
            }
        }
    },
    series: [{
        name: 'Share',
        data: {{severity_wise | tojson}}
    }]
});


$(document).ready(function() {

	$('#latest-score').DataTable({
		"columns": [
			{ "width": "25%" },
			{ "width": "25%"},
			{ "width": "25%"}
		],
		"paging":   false,
		"info":     false,
		"searching": false 
	});
	
	$('#previous-score').DataTable({
		"columns": [
			{ "width": "25%" },
			{ "width": "25%"},
			{ "width": "25%"}
		],
		"paging":   false,
		"info":     false,
		"searching": false 
	});	
	

	$('#bug-list-table').DataTable({  "columns": [
	{ "width": "5%" },
	{ "width": "5%"},
	{ "width": "5%"},
	{ "width": "5%"},
	{ "width": "70%"}
	],
	"paging":   false,
	"info":     false,
	"searching": false 
	});
	
	{% for platform_key,platform_details in platform_wise_score_breakup.items(): %}
			$('#bug-list-table-{{loop.index}}').DataTable({  "columns": [
			{ "width": "5%" },
			{ "width": "5%"},
			{ "width": "5%"},
			{ "width": "5%"},
			{ "width": "70%"}
			],
			"paging":   false,
			"info":     false,
			"searching": false 
			});	
	{% endfor %}
  
  
});	

</script>
